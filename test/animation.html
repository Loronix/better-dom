<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Animation test</title>
    <meta name="viewport" content="width=device-width,user-scalable=no">
    <!--[if IE]>
        <link href="../dist/better-dom.htc" rel="htc" />
        <script src="../bower_components/es5-shim/es5-shim.js"></script>
        <script src="../bower_components/html5shiv/dist/html5shiv.js"></script>
    <![endif]-->
    <script src="../build/better-dom.js"></script>
    <style>
    #bar {
        overflow: hidden;
        border: 1px solid;
        position: relative;
        padding: 0 10px;
    }

    #bar, .bar-item {
        width: 200px;
        height: 200px;
    }

    .bar-item {
        -webkit-transition: -webkit-transform 0.5s linear;
        transition: transform 0.5s linear;

        -webkit-transform: translateX(0px);
        transform: translateX(0px);
    }

    .bar-item[aria-hidden=true] {
        -webkit-transform: translateX(-100%);
        transform: translateX(-100%);
    }

    .bar-item + .bar-item {
        position: absolute;
        left: 10px;
        top: 0px;

        visibility: hidden;
    }

    .bar-item + .bar-item[aria-hidden=true] {
        -webkit-transform: translateX(100%);
        transform: translateX(100%);
    }
    </style>
</head>
<body>
    <div id="bar">
        <div class="bar-item" style="background: yellow"></div>
        <div class="bar-item" style="background: green" aria-hidden="true"></div>
    </div>
    <script>
    var bars = DOM.findAll(".bar-item"),
        bar = DOM.find("#bar"),
        andRemove = function(el) { el.remove() },
        it = 0;

    bars[1].remove();

    setInterval(function() {
        ++it;

        bars.forEach(function(el, index) {
            var otherBar = bars[index ? 0 : 1];

            if ((it + index) % 2) {
                bar.prepend(otherBar);

                otherBar.show();

                el.hide(andRemove);
            } else {
                bar.append(el);

                el.show();
                otherBar.hide(andRemove);
            }
        });
    }, 1000);
    </script>
</body>
</html>